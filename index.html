<!doctype html>

<html lang="es">
<head>
  <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
      <title>Sobre con Carta — Interactivo</title>
        <meta name="description" content="Un sobre interactivo que se abre para revelar una carta editable en su interior." />
          <link rel="preconnect" href="https://fonts.googleapis.com">
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
              <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Merriweather:ital,wght@0,300;0,400;0,700;1,300&display=swap" rel="stylesheet">
                <style>
                    :root{
                          --bg:#f7f7fb;
                                --ink:#2a2a2a;
                                      --accent:#c14953;    /* sello & detalles */
                                            --env-top:#f0e4d7;   /* tapa */
                                                  --env-body:#f6eadf;  /* cuerpo */
                                                        --paper:#fffaf3;     /* papel carta */
                                                              --shadow: 0 14px 30px rgba(0,0,0,.12), 0 4px 8px rgba(0,0,0,.06);
                                                                  }*{box-sizing:border-box}
                                                                  html,body{height:100%}
                                                                  body{
                                                                    margin:0;
                                                                      display:grid;
                                                                        place-items:center;
                                                                          background: radial-gradient(1200px 800px at 80% -20%, #ffffff, var(--bg));
                                                                            color:var(--ink);
                                                                              font-family: "Merriweather", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
                                                                              }

                                                                              .wrap{
                                                                                width:min(680px, 92vw);
                                                                                  display:grid;
                                                                                    gap:18px;
                                                                                      justify-items:center;
                                                                                      }

                                                                                      h1{
                                                                                        font-family: "Great Vibes", cursive;
                                                                                          font-weight:400;
                                                                                            font-size: clamp(34px, 6vw, 64px);
                                                                                              margin:0 0 6px;
                                                                                                letter-spacing:.5px;
                                                                                                  color:#222;
                                                                                                    text-shadow: 0 1px 0 rgba(255,255,255,.8);
                                                                                                    }
                                                                                                    p.lead{margin:0;opacity:.7;font-size:clamp(14px,2.2vw,16px)}

                                                                                                    /* --- SOBRE --- */
                                                                                                    .envelope{
                                                                                                      position:relative;
                                                                                                        width:min(560px, 96vw);
                                                                                                          height:380px;
                                                                                                            perspective:1200px;
                                                                                                            }

                                                                                                            .env-shadow{position:absolute;inset:0;filter:drop-shadow(0 18px 28px rgba(0,0,0,.18))}

                                                                                                            .env{
                                                                                                              position:relative;
                                                                                                                width:100%;
                                                                                                                  height:100%;
                                                                                                                    border-radius:18px;
                                                                                                                      box-shadow: var(--shadow);
                                                                                                                        background:linear-gradient(#0000,#0000), var(--env-body);
                                                                                                                          overflow:hidden;
                                                                                                                            isolation:isolate;
                                                                                                                            }
                                                                                                                            /* tapa (triángulo) */
                                                                                                                            .flap{
                                                                                                                              position:absolute;
                                                                                                                                inset:0;
                                                                                                                                  transform-origin:top center;
                                                                                                                                    background:linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,0) 22%), var(--env-top);
                                                                                                                                      clip-path: polygon(0 0, 100% 0, 50% 60%);
                                                                                                                                        z-index:3;
                                                                                                                                          transition: transform .9s cubic-bezier(.2,.8,.2,1);
                                                                                                                                            will-change: transform;
                                                                                                                                            }
                                                                                                                                            /* pliegues laterales decorativos */
                                                                                                                                            .fold-left, .fold-right{
                                                                                                                                              position:absolute; bottom:0; top:38%; width:50%;
                                                                                                                                                background:linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,.06)), var(--env-body);
                                                                                                                                                  z-index:1;
                                                                                                                                                  }
                                                                                                                                                  .fold-left{left:0; clip-path: polygon(0 0, 100% 100%, 0 100%)}
                                                                                                                                                  .fold-right{right:0; clip-path: polygon(0 0, 100% 0, 100% 100%)}

                                                                                                                                                  /* sello / sticker */
                                                                                                                                                  .seal{
                                                                                                                                                    position:absolute; inset:auto; left:50%; top:38%; transform:translate(-50%,-50%);
                                                                                                                                                      width:70px; height:70px; border-radius:50%;
                                                                                                                                                        background:
                                                                                                                                                            radial-gradient(closest-side, rgba(255,255,255,.9), rgba(255,255,255,0) 70%),
                                                                                                                                                                var(--accent);
                                                                                                                                                                  box-shadow: inset 0 2px 0 rgba(255,255,255,.45), 0 6px 16px rgba(0,0,0,.18);
                                                                                                                                                                    display:grid;place-items:center;
                                                                                                                                                                      color:white; font-weight:700; letter-spacing:1px;
                                                                                                                                                                        z-index:4;
                                                                                                                                                                          pointer-events:none;
                                                                                                                                                                          }
                                                                                                                                                                          .seal svg{width:36px;height:36px;opacity:.9}

                                                                                                                                                                          /* carta */
                                                                                                                                                                          .letter{
                                                                                                                                                                            position:absolute; left:50%; bottom:8px; transform:translateX(-50%) translateY(40%);
                                                                                                                                                                              width:86%; height:78%; background: var(--paper);
                                                                                                                                                                                border-radius:10px; box-shadow: 0 20px 30px rgba(0,0,0,.18);
                                                                                                                                                                                  padding:26px 26px 30px; z-index:2;
                                                                                                                                                                                    transition: transform .9s cubic-bezier(.2,.8,.2,1);
                                                                                                                                                                                    }

                                                                                                                                                                                    /* líneas tipo papel rayado */
                                                                                                                                                                                    .letter::before{
                                                                                                                                                                                      content:""; position:absolute; inset:0; border-radius:10px;
                                                                                                                                                                                        background:
                                                                                                                                                                                            repeating-linear-gradient(180deg, rgba(0,0,0,0) 0 22px, rgba(0,0,0,.06) 22px 23px);
                                                                                                                                                                                              pointer-events:none;
                                                                                                                                                                                              }

                                                                                                                                                                                              .hand{
                                                                                                                                                                                                position:relative; z-index:1;
                                                                                                                                                                                                  font-family: "Merriweather", serif;
                                                                                                                                                                                                    line-height:1.7;
                                                                                                                                                                                                      font-size: clamp(14px, 2.2vw, 18px);
                                                                                                                                                                                                      }
                                                                                                                                                                                                      .hand .sig{font-family:"Great Vibes", cursive; font-size:1.8em}

                                                                                                                                                                                                      .controls{
                                                                                                                                                                                                        display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:8px;
                                                                                                                                                                                                        }

                                                                                                                                                                                                        button{
                                                                                                                                                                                                          appearance:none; border:none; cursor:pointer; font:inherit; color:white;
                                                                                                                                                                                                            background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(0,0,0,.08)), var(--accent);
                                                                                                                                                                                                              padding:10px 16px; border-radius:999px; box-shadow: var(--shadow);
                                                                                                                                                                                                                transition: transform .15s ease, filter .2s ease; will-change: transform, filter;
                                                                                                                                                                                                                }
                                                                                                                                                                                                                button:hover{ transform: translateY(-1px) }
                                                                                                                                                                                                                button:active{ transform: translateY(0) scale(.98) }
                                                                                                                                                                                                                button.secondary{ background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(0,0,0,.08)), #6466f1 }
                                                                                                                                                                                                                button.ghost{ background:#f1f1f6; color:#333 }

                                                                                                                                                                                                                /* Estados abiertos */
                                                                                                                                                                                                                .envelope.open .flap{ transform: rotateX(180deg) }
                                                                                                                                                                                                                .envelope.open .letter{ transform: translateX(-50%) translateY(-6%) }

                                                                                                                                                                                                                /* Responsivo */
                                                                                                                                                                                                                @media (max-width: 480px){
                                                                                                                                                                                                                  .envelope{ height:330px }
                                                                                                                                                                                                                    .seal{ width:60px;height:60px }
                                                                                                                                                                                                                    }

                                                                                                                                                                                                                    /* Modo impresión: imprime solo la carta */
                                                                                                                                                                                                                    @media print{
                                                                                                                                                                                                                      body{ background:white }
                                                                                                                                                                                                                        .wrap>*:not(.letter){ display:none !important }
                                                                                                                                                                                                                          .letter{ position:static; transform:none; width:auto; height:auto; box-shadow:none }
                                                                                                                                                                                                                            .letter::before{ display:none }
                                                                                                                                                                                                                            }

                                                                                                                                                                                                                              </style>
                                                                                                                                                                                                                              </head>
                                                                                                                                                                                                                              <body>
                                                                                                                                                                                                                                <main class="wrap" aria-live="polite">
                                                                                                                                                                                                                                    <h1>Para ti ✉️</h1>
                                                                                                                                                                                                                                        <p class="lead">Haz clic en el sobre para abrir la carta. Puedes editar el mensaje y se guardará en este dispositivo.</p><section class="envelope" id="envelope" aria-label="Sobre con carta">
                                                                                                                                                                                                                                          <div class="env env-shadow" aria-hidden="true"></div>
                                                                                                                                                                                                                                            <div class="env">
                                                                                                                                                                                                                                                <div class="flap" aria-hidden="true"></div>
                                                                                                                                                                                                                                                    <div class="fold-left" aria-hidden="true"></div>
                                                                                                                                                                                                                                                        <div class="fold-right" aria-hidden="true"></div>
                                                                                                                                                                                                                                                            <div class="seal" aria-hidden="true" title="Sello">
                                                                                                                                                                                                                                                                  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                                                                                                                                                                                                                                                                          <path d="M12 2l2.39 4.84 5.34.78-3.86 3.76.91 5.31L12 14.77 7.22 16.69l.91-5.31-3.86-3.76 5.34-.78L12 2z" stroke="white" stroke-width="1.3"/>
                                                                                                                                                                                                                                                                                </svg>
                                                                                                                                                                                                                                                                                    </div>
                                                                                                                                                                                                                                                                                        <article class="letter" id="letter" tabindex="0" role="article" aria-label="Carta">
                                                                                                                                                                                                                                                                                              <div class="hand" id="content" contenteditable="true">
                                                                                                                                                                                                                                                                                                      <p>Mi amor,</p>
                                                                                                                                                                                                                                                                                                              <p>
                                                                                                                                                                                                                                                                                                                        Hoy quise escribirte unas líneas para recordarte lo que ya sabes: que eres mi lugar favorito, mi pausa y mi impulso. Gracias por cada risa compartida y por todas las que aún nos esperan.
                                                                                                                                                                                                                                                                                                                                </p>
                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                  Si algún día dudas, vuelve a leer esta carta. Aquí caben mis planes, mis ganas y mi certeza de caminar contigo.
                                                                                                                                                                                                                                                                                                                                                          </p>
                                                                                                                                                                                                                                                                                                                                                                  <p class="sig">Con todo mi cariño,<br>Tu persona favorita</p>
                                                                                                                                                                                                                                                                                                                                                                        </div>
                                                                                                                                                                                                                                                                                                                                                                            </article>
                                                                                                                                                                                                                                                                                                                                                                              </div>
                                                                                                                                                                                                                                                                                                                                                                              </section>

                                                                                                                                                                                                                                                                                                                                                                              <div class="controls" aria-label="Controles">
                                                                                                                                                                                                                                                                                                                                                                                <button id="toggleBtn" aria-controls="envelope" aria-expanded="false">Abrir / Cerrar</button>
                                                                                                                                                                                                                                                                                                                                                                                  <button class="secondary" id="printBtn">Imprimir carta</button>
                                                                                                                                                                                                                                                                                                                                                                                    <button class="ghost" id="resetBtn" title="Borrar el contenido guardado">Restablecer texto</button>
                                                                                                                                                                                                                                                                                                                                                                                    </div>

                                                                                                                                                                                                                                                                                                                                                                                    <p class="lead" style="opacity:.6">Consejo: escribe tu mensaje, ábrelo, haz captura o imprime. Cambia colores editando las variables CSS en <code>:root</code>.</p>

                                                                                                                                                                                                                                                                                                                                                                                      </main>  <script>
                                                                                                                                                                                                                                                                                                                                                                                          (function(){
                                                                                                                                                                                                                                                                                                                                                                                                const env = document.getElementById('envelope');
                                                                                                                                                                                                                                                                                                                                                                                                      const letter = document.getElementById('letter');
                                                                                                                                                                                                                                                                                                                                                                                                            const content = document.getElementById('content');
                                                                                                                                                                                                                                                                                                                                                                                                                  const toggleBtn = document.getElementById('toggleBtn');
                                                                                                                                                                                                                                                                                                                                                                                                                        const printBtn = document.getElementById('printBtn');
                                                                                                                                                                                                                                                                                                                                                                                                                              const resetBtn = document.getElementById('resetBtn');
                                                                                                                                                                                                                                                                                                                                                                                                                                    const KEY = 'interactive-letter-v1';

                                                                                                                                                                                                                                                                                                                                                                                                                                          // Restaurar contenido guardado
                                                                                                                                                                                                                                                                                                                                                                                                                                                try{
                                                                                                                                                                                                                                                                                                                                                                                                                                                        const saved = localStorage.getItem(KEY);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                if(saved){ content.innerHTML = saved; }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }catch(e){ /* almacenamiento deshabilitado */ }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Abrir al hacer clic en el sobre o al presionar Enter/Espacio
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const toggleOpen = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const isOpen = env.classList.toggle('open');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  toggleBtn.setAttribute('aria-expanded', String(isOpen));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if(isOpen){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // mover foco a la carta para accesibilidad
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              setTimeout(()=> letter.focus(), 400);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  env.addEventListener('click', (e)=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // Evitar que clics dentro de la carta (al editar) cierren accidentalmente
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const withinLetter = e.target.closest('.letter');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          if(!withinLetter){ toggleOpen(); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      env.addEventListener('keydown', (e)=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggleOpen(); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          toggleBtn.addEventListener('click', toggleOpen);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // Guardar automáticamente cambios del texto (debounced)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      let t;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const save = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    try{ localStorage.setItem(KEY, content.innerHTML); }catch(e){ /* noop */ }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const debounced = () => { clearTimeout(t); t = setTimeout(save, 300); };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      content.addEventListener('input', debounced);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Impresión
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  printBtn.addEventListener('click', ()=> window.print());

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Restablecer
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              resetBtn.addEventListener('click', ()=>{
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if(confirm('¿Borrar el contenido guardado y volver al texto original?')){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                try{ localStorage.removeItem(KEY); }catch(e){}
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          content.innerHTML = `
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      <p>Mi amor,</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                Hoy quise escribirte unas líneas para recordarte lo que ya sabes: que eres mi lugar favorito, mi pausa y mi impulso. Gracias por cada risa compartida y por todas las que aún nos esperan.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Si algún día dudas, vuelve a leer esta carta. Aquí caben mis planes, mis ganas y mi certeza de caminar contigo.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <p class="sig">Con todo mi amor,<br>Tu futuro esposo Roger</p>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        `;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      });

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            // Mejora: abrir con animación si hay hash #abrir
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  if(location.hash.replace('#','').toLowerCase().includes('abrir')){
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          setTimeout(()=> toggleOpen(), 300);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    })();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </script></body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      </html>